const n=JSON.parse(`{"key":"v-444cac13","path":"/zh/posts/javascript/this/","title":"javascript 中的 this","lang":"zh-CN","frontmatter":{"description":"javascript 中的 this 改变this指向 bind 方法实现 /* * @Author: HotSuitor * @Date: 2020-03-19 14:38:04 * @LastEditors: hs * @LastEditTime: 2020-03-19 15:37:36 * @Description: hotsuitor@qq.com */ // es6 if(typeof Function.prototype.bind !== 'function') { Function.prototype.bind = function() { var _this = this var args1 = Array.prototype.slice.call(arguments) var context = args1.shift() return function() { var args2 = Array.prototype.slice.call(arguments) return _this.apply(context, args1.concat(args2)) } } } // es6 Function.prototype.bind = Function.prototype.bind || function(...args1) { const _this = this const context = args1.shift() return function(...args2) { return _this.apply(context, [...args1, ...args2]) } } global.a = 'hello' function foo() { console.log(a) } foo.call(null) var obj = { a: 'world', boo: function() { console.log(this.a) } } obj.boo() var bar = obj.boo bar() function func(fn) { var _this = this return (function() { fn() })(fn) } func(obj.boo) var obj2 = { a: 'world', b: { a: 'obj2-&gt;b', foo: function() { console.log(this.a) } } } obj2.b.foo() var a = 20 var obj = { a: 40, foo: () =&gt; { console.log(this.a) function func() { this.a = 60 console.log(this.a) } func.prototype.a = 50 return func } } var bar = obj.foo() bar() new bar()","head":[["meta",{"property":"og:url","content":"https://mister-hope.github.io/blog/zh/posts/javascript/this/"}],["meta",{"property":"og:site_name","content":"磨刀霍霍向猪羊"}],["meta",{"property":"og:title","content":"javascript 中的 this"}],["meta",{"property":"og:description","content":"javascript 中的 this 改变this指向 bind 方法实现 /* * @Author: HotSuitor * @Date: 2020-03-19 14:38:04 * @LastEditors: hs * @LastEditTime: 2020-03-19 15:37:36 * @Description: hotsuitor@qq.com */ // es6 if(typeof Function.prototype.bind !== 'function') { Function.prototype.bind = function() { var _this = this var args1 = Array.prototype.slice.call(arguments) var context = args1.shift() return function() { var args2 = Array.prototype.slice.call(arguments) return _this.apply(context, args1.concat(args2)) } } } // es6 Function.prototype.bind = Function.prototype.bind || function(...args1) { const _this = this const context = args1.shift() return function(...args2) { return _this.apply(context, [...args1, ...args2]) } } global.a = 'hello' function foo() { console.log(a) } foo.call(null) var obj = { a: 'world', boo: function() { console.log(this.a) } } obj.boo() var bar = obj.boo bar() function func(fn) { var _this = this return (function() { fn() })(fn) } func(obj.boo) var obj2 = { a: 'world', b: { a: 'obj2-&gt;b', foo: function() { console.log(this.a) } } } obj2.b.foo() var a = 20 var obj = { a: 40, foo: () =&gt; { console.log(this.a) function func() { this.a = 60 console.log(this.a) } func.prototype.a = 50 return func } } var bar = obj.foo() bar() new bar()"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-03-15T04:36:56.000Z"}],["meta",{"property":"article:modified_time","content":"2023-03-15T04:36:56.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"javascript 中的 this\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-03-15T04:36:56.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"改变this指向","slug":"改变this指向","link":"#改变this指向","children":[]},{"level":2,"title":"bind 方法实现","slug":"bind-方法实现","link":"#bind-方法实现","children":[]}],"git":{"createdTime":1678855016000,"updatedTime":1678855016000,"contributors":[{"name":"hotsuitor","email":"hotsuitor@qq.com","commits":1}]},"readingTime":{"minutes":0.05,"words":16},"filePathRelative":"zh/posts/javascript/this/README.md","localizedDate":"2023年3月15日","excerpt":"<h1> javascript 中的 this</h1>\\n<h2> 改变this指向</h2>\\n<h2> bind 方法实现</h2>\\n<div class=\\"language-javascript line-numbers-mode\\" data-ext=\\"js\\"><pre class=\\"language-javascript\\"><code><span class=\\"token comment\\">/*\\n * @Author: HotSuitor\\n * @Date: 2020-03-19 14:38:04\\n * @LastEditors: hs\\n * @LastEditTime: 2020-03-19 15:37:36\\n * @Description: hotsuitor@qq.com\\n */</span>\\n<span class=\\"token comment\\">// es6</span>\\n<span class=\\"token keyword\\">if</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">typeof</span> <span class=\\"token class-name\\">Function</span><span class=\\"token punctuation\\">.</span>prototype<span class=\\"token punctuation\\">.</span>bind <span class=\\"token operator\\">!==</span> <span class=\\"token string\\">'function'</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n  <span class=\\"token class-name\\">Function</span><span class=\\"token punctuation\\">.</span>prototype<span class=\\"token punctuation\\">.</span><span class=\\"token function-variable function\\">bind</span> <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">function</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">var</span> _this <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">this</span>\\n    <span class=\\"token keyword\\">var</span> args1 <span class=\\"token operator\\">=</span> <span class=\\"token class-name\\">Array</span><span class=\\"token punctuation\\">.</span>prototype<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">slice</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">call</span><span class=\\"token punctuation\\">(</span>arguments<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">var</span> context <span class=\\"token operator\\">=</span> args1<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">shift</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">return</span> <span class=\\"token keyword\\">function</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n      <span class=\\"token keyword\\">var</span> args2 <span class=\\"token operator\\">=</span> <span class=\\"token class-name\\">Array</span><span class=\\"token punctuation\\">.</span>prototype<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">slice</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">call</span><span class=\\"token punctuation\\">(</span>arguments<span class=\\"token punctuation\\">)</span>\\n      <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">_this</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">apply</span><span class=\\"token punctuation\\">(</span>context<span class=\\"token punctuation\\">,</span> args1<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">concat</span><span class=\\"token punctuation\\">(</span>args2<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n  <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span>\\n\\n<span class=\\"token comment\\">// es6</span>\\n<span class=\\"token class-name\\">Function</span><span class=\\"token punctuation\\">.</span>prototype<span class=\\"token punctuation\\">.</span>bind <span class=\\"token operator\\">=</span> <span class=\\"token class-name\\">Function</span><span class=\\"token punctuation\\">.</span>prototype<span class=\\"token punctuation\\">.</span>bind <span class=\\"token operator\\">||</span> <span class=\\"token keyword\\">function</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\"><span class=\\"token operator\\">...</span>args1</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n  <span class=\\"token keyword\\">const</span> _this <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">this</span>\\n  <span class=\\"token keyword\\">const</span> context <span class=\\"token operator\\">=</span> args1<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">shift</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n  <span class=\\"token keyword\\">return</span> <span class=\\"token keyword\\">function</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\"><span class=\\"token operator\\">...</span>args2</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">_this</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">apply</span><span class=\\"token punctuation\\">(</span>context<span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">[</span><span class=\\"token operator\\">...</span>args1<span class=\\"token punctuation\\">,</span> <span class=\\"token operator\\">...</span>args2<span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span>\\n  <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span>\\n\\nglobal<span class=\\"token punctuation\\">.</span>a <span class=\\"token operator\\">=</span> <span class=\\"token string\\">'hello'</span>\\n<span class=\\"token keyword\\">function</span> <span class=\\"token function\\">foo</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n  console<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">log</span><span class=\\"token punctuation\\">(</span>a<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span>\\n<span class=\\"token function\\">foo</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">call</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">null</span><span class=\\"token punctuation\\">)</span>\\n\\n<span class=\\"token keyword\\">var</span> obj <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">{</span>\\n  <span class=\\"token literal-property property\\">a</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">'world'</span><span class=\\"token punctuation\\">,</span>\\n  <span class=\\"token function-variable function\\">boo</span><span class=\\"token operator\\">:</span> <span class=\\"token keyword\\">function</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    console<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">log</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>a<span class=\\"token punctuation\\">)</span>\\n  <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span>\\nobj<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">boo</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token keyword\\">var</span> bar <span class=\\"token operator\\">=</span> obj<span class=\\"token punctuation\\">.</span>boo\\n<span class=\\"token function\\">bar</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n\\n<span class=\\"token keyword\\">function</span> <span class=\\"token function\\">func</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">fn</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n  <span class=\\"token keyword\\">var</span> _this <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">this</span>\\n  <span class=\\"token keyword\\">return</span> <span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">function</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token function\\">fn</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n  <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">(</span>fn<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span>\\n<span class=\\"token function\\">func</span><span class=\\"token punctuation\\">(</span>obj<span class=\\"token punctuation\\">.</span>boo<span class=\\"token punctuation\\">)</span>\\n\\n<span class=\\"token keyword\\">var</span> obj2 <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">{</span>\\n  <span class=\\"token literal-property property\\">a</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">'world'</span><span class=\\"token punctuation\\">,</span>\\n  <span class=\\"token literal-property property\\">b</span><span class=\\"token operator\\">:</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token literal-property property\\">a</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">'obj2-&gt;b'</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token function-variable function\\">foo</span><span class=\\"token operator\\">:</span> <span class=\\"token keyword\\">function</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n      console<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">log</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>a<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n  <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span>\\nobj2<span class=\\"token punctuation\\">.</span>b<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">foo</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n\\n<span class=\\"token keyword\\">var</span> a <span class=\\"token operator\\">=</span> <span class=\\"token number\\">20</span>\\n\\n<span class=\\"token keyword\\">var</span> obj <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">{</span>\\n  <span class=\\"token literal-property property\\">a</span><span class=\\"token operator\\">:</span> <span class=\\"token number\\">40</span><span class=\\"token punctuation\\">,</span>\\n  <span class=\\"token function-variable function\\">foo</span><span class=\\"token operator\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token punctuation\\">{</span>\\n    console<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">log</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>a<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">function</span> <span class=\\"token function\\">func</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n      <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>a <span class=\\"token operator\\">=</span> <span class=\\"token number\\">60</span>\\n      console<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">log</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>a<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    func<span class=\\"token punctuation\\">.</span>prototype<span class=\\"token punctuation\\">.</span>a <span class=\\"token operator\\">=</span> <span class=\\"token number\\">50</span>\\n    <span class=\\"token keyword\\">return</span> func\\n  <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span>\\n<span class=\\"token keyword\\">var</span> bar <span class=\\"token operator\\">=</span> obj<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">foo</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token function\\">bar</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token keyword\\">new</span> <span class=\\"token class-name\\">bar</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}`);export{n as data};
