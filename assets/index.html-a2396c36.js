import{_ as a,X as l,Y as r,Z as e,$ as n,a0 as i,a2 as c,a1 as t,C as o}from"./framework-2b07d456.js";const p={},u=t('<h1 id="如何写一个cli工具并发布npm包" tabindex="-1"><a class="header-anchor" href="#如何写一个cli工具并发布npm包" aria-hidden="true">#</a> 如何写一个cli工具并发布npm包</h1><ol><li>注册 npm 账号</li><li>本地初始化一个 npm 项目 <code>npm init -y</code></li><li>本地测试 <code>npm link</code> 把cli命令链接到环境变量中</li><li>本地执行 <code>cli xx</code> 命令，有问题，继续改；没问题，增加 <code>README.md</code> 项目说明文件，准备提交</li><li><code>npm login</code> 登录 npm 仓库</li><li><code>npm publish</code> 提交到 npm 仓库</li></ol>',2),m=t(`<p><strong>遇到问题</strong></p><ul><li><strong>npm publish 发布遇到问题</strong></li><li>npm login 登录错误 426</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm ERR! code E426
npm ERR! 426 Upgrade Required - PUT http://registry.npmjs.org/-/user/org.couchdb.user:hotsuitor
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>需要设置 <code>registry</code> 地址 而且是需要 <code>https</code>，</p><blockquote><p>有坑：这里设置成 <code>http</code> 地址的仓库地址还是会报同样的错误</p></blockquote><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm config set registry https://registry.npmjs.org/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>npm publish 发布错误 403</li></ul><p>发布公开版本包</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm publish --access publish
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>提示错误，没有权限提交到这个包仓库</p><p>原因是这个公开的包名已被占用</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm ERR! code E403
npm ERR! 403 403 Forbidden - PUT https://registry.npmjs.org/upload-dist - You do not have permission to publish &quot;upload-dist&quot;. Are you logged in as the correct user?
npm ERR! 403 In most cases, you or one of your dependencies are requesting
npm ERR! 403 a package version that is forbidden by your security policy, or
npm ERR! 403 on a server you do not have access to.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>修改带作用域的报名再次发布，在报名前加上用户名作用域 <code>@username/packagename</code> username不能随便写，只能是当前用户的username，不然也会出现 403 无权限的错误</p><p><code>package.json</code></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>{
    &quot;name&quot;: &quot;@hotsuitor/upload-dist&quot;,
    ...
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>npm whoami</code> 可以查看当前用户名</p><p>最后 <code>npm publish --access publish</code> 发布成功</p><h2 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料" aria-hidden="true">#</a> 参考资料</h2>`,18),h={href:"https://segmentfault.com/a/1190000017477077",target:"_blank",rel:"noopener noreferrer"},v={href:"https://www.cnblogs.com/thyshare/p/13983462.html",target:"_blank",rel:"noopener noreferrer"};function g(b,x){const d=o("RouterLink"),s=o("ExternalLinkIcon");return l(),r("div",null,[u,e("blockquote",null,[e("p",null,[n("写的一些"),i(d,{to:"/zh/tools/efficient.html#%E8%87%AA%E5%B7%B1%E5%86%99%E7%9A%84%E5%B0%8F%E5%B7%A5%E5%85%B7"},{default:c(()=>[n("小工具")]),_:1})])]),m,e("blockquote",null,[e("p",null,[e("a",h,[n("npm发布包教程（四）：迭代"),i(s)]),e("a",v,[n("npm 发布包遇到的问题"),i(s)])])])])}const E=a(p,[["render",g],["__file","index.html.vue"]]);export{E as default};
